<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.9.1">
  <compounddef id="leveldbwrapper_8cpp" kind="file" language="C++">
    <compoundname>leveldbwrapper.cpp</compoundname>
    <includes refid="leveldbwrapper_8h" local="yes">leveldbwrapper.h</includes>
    <includes local="no">boost/filesystem.hpp</includes>
    <includes refid="cache_8h" local="no">leveldb/cache.h</includes>
    <includes refid="env_8h" local="no">leveldb/env.h</includes>
    <includes refid="filter__policy_8h" local="no">leveldb/filter_policy.h</includes>
    <includes refid="memenv_8h" local="no">memenv.h</includes>
    <incdepgraph>
      <node id="40142">
        <label>list</label>
      </node>
      <node id="40122">
        <label>boost/thread/mutex.hpp</label>
      </node>
      <node id="40161">
        <label>leveldb/write_batch.h</label>
        <link refid="write__batch_8h"/>
        <childnode refid="40107" relation="include">
        </childnode>
        <childnode refid="40159" relation="include">
        </childnode>
      </node>
      <node id="40164">
        <label>stdarg.h</label>
      </node>
      <node id="40141">
        <label>amount.h</label>
        <link refid="amount_8h"/>
        <childnode refid="40106" relation="include">
        </childnode>
        <childnode refid="40120" relation="include">
        </childnode>
        <childnode refid="40107" relation="include">
        </childnode>
      </node>
      <node id="40112">
        <label>limits</label>
      </node>
      <node id="40152">
        <label>openssl/rand.h</label>
      </node>
      <node id="40130">
        <label>assert.h</label>
      </node>
      <node id="40117">
        <label>boost/tuple/tuple.hpp</label>
      </node>
      <node id="40160">
        <label>leveldb/options.h</label>
        <link refid="options_8h"/>
        <childnode refid="40158" relation="include">
        </childnode>
      </node>
      <node id="40126">
        <label>version.h</label>
        <link refid="version_8h"/>
        <childnode refid="40127" relation="include">
        </childnode>
        <childnode refid="40107" relation="include">
        </childnode>
      </node>
      <node id="40123">
        <label>sys/mman.h</label>
      </node>
      <node id="40120">
        <label>stdlib.h</label>
      </node>
      <node id="40151">
        <label>openssl/crypto.h</label>
      </node>
      <node id="40147">
        <label>boost/date_time/posix_time/posix_time_types.hpp</label>
      </node>
      <node id="40111">
        <label>cassert</label>
      </node>
      <node id="40140">
        <label>stdexcept</label>
      </node>
      <node id="40133">
        <label>util.h</label>
        <link refid="util_8h"/>
        <childnode refid="40134" relation="include">
        </childnode>
        <childnode refid="40135" relation="include">
        </childnode>
        <childnode refid="40136" relation="include">
        </childnode>
        <childnode refid="40106" relation="include">
        </childnode>
        <childnode refid="40137" relation="include">
        </childnode>
        <childnode refid="40141" relation="include">
        </childnode>
        <childnode refid="40109" relation="include">
        </childnode>
        <childnode refid="40142" relation="include">
        </childnode>
        <childnode refid="40132" relation="include">
        </childnode>
        <childnode refid="40108" relation="include">
        </childnode>
        <childnode refid="40107" relation="include">
        </childnode>
        <childnode refid="40143" relation="include">
        </childnode>
        <childnode refid="40144" relation="include">
        </childnode>
        <childnode refid="40145" relation="include">
        </childnode>
        <childnode refid="40146" relation="include">
        </childnode>
        <childnode refid="40147" relation="include">
        </childnode>
        <childnode refid="40148" relation="include">
        </childnode>
        <childnode refid="40149" relation="include">
        </childnode>
        <childnode refid="40150" relation="include">
        </childnode>
        <childnode refid="40151" relation="include">
        </childnode>
        <childnode refid="40152" relation="include">
        </childnode>
        <childnode refid="40153" relation="include">
        </childnode>
        <childnode refid="40113" relation="include">
        </childnode>
      </node>
      <node id="40146">
        <label>boost/date_time/gregorian/gregorian_types.hpp</label>
      </node>
      <node id="40154">
        <label>leveldb/db.h</label>
        <link refid="leveldb_2include_2leveldb_2db_8h"/>
        <childnode refid="40113" relation="include">
        </childnode>
        <childnode refid="40155" relation="include">
        </childnode>
        <childnode refid="40156" relation="include">
        </childnode>
        <childnode refid="40160" relation="include">
        </childnode>
      </node>
      <node id="40107">
        <label>string</label>
      </node>
      <node id="40109">
        <label>map</label>
      </node>
      <node id="40143">
        <label>boost/thread.hpp</label>
      </node>
      <node id="40105">
        <label>leveldbwrapper.h</label>
        <link refid="leveldbwrapper_8h"/>
        <childnode refid="40106" relation="include">
        </childnode>
        <childnode refid="40128" relation="include">
        </childnode>
        <childnode refid="40133" relation="include">
        </childnode>
        <childnode refid="40145" relation="include">
        </childnode>
        <childnode refid="40154" relation="include">
        </childnode>
        <childnode refid="40161" relation="include">
        </childnode>
      </node>
      <node id="40158">
        <label>stddef.h</label>
      </node>
      <node id="40162">
        <label>leveldb/cache.h</label>
        <link refid="cache_8h"/>
        <childnode refid="40113" relation="include">
        </childnode>
        <childnode refid="40157" relation="include">
        </childnode>
      </node>
      <node id="40159">
        <label>leveldb/status.h</label>
        <link refid="status_8h"/>
        <childnode refid="40107" relation="include">
        </childnode>
        <childnode refid="40157" relation="include">
        </childnode>
      </node>
      <node id="40106">
        <label>serialize.h</label>
        <link refid="serialize_8h"/>
        <childnode refid="40107" relation="include">
        </childnode>
        <childnode refid="40108" relation="include">
        </childnode>
        <childnode refid="40109" relation="include">
        </childnode>
        <childnode refid="40110" relation="include">
        </childnode>
        <childnode refid="40111" relation="include">
        </childnode>
        <childnode refid="40112" relation="include">
        </childnode>
        <childnode refid="40113" relation="include">
        </childnode>
        <childnode refid="40114" relation="include">
        </childnode>
        <childnode refid="40115" relation="include">
        </childnode>
        <childnode refid="40116" relation="include">
        </childnode>
        <childnode refid="40117" relation="include">
        </childnode>
        <childnode refid="40118" relation="include">
        </childnode>
        <childnode refid="40126" relation="include">
        </childnode>
      </node>
      <node id="40124">
        <label>limits.h</label>
      </node>
      <node id="40136">
        <label>sys/resource.h</label>
      </node>
      <node id="40148">
        <label>openssl/bio.h</label>
      </node>
      <node id="40134">
        <label>sys/types.h</label>
      </node>
      <node id="40131">
        <label>ios</label>
      </node>
      <node id="40121">
        <label>string.h</label>
      </node>
      <node id="40127">
        <label>clientversion.h</label>
        <link refid="clientversion_8h"/>
      </node>
      <node id="40115">
        <label>cstdio</label>
      </node>
      <node id="40150">
        <label>openssl/buffer.h</label>
      </node>
      <node id="40116">
        <label>boost/type_traits/is_fundamental.hpp</label>
      </node>
      <node id="40145">
        <label>boost/filesystem/path.hpp</label>
      </node>
      <node id="40125">
        <label>unistd.h</label>
      </node>
      <node id="40108">
        <label>vector</label>
      </node>
      <node id="40144">
        <label>boost/filesystem.hpp</label>
      </node>
      <node id="40132">
        <label>utility</label>
      </node>
      <node id="40104">
        <label>/home/dev/ds-160209/src/leveldbwrapper.cpp</label>
        <link refid="leveldbwrapper.cpp"/>
        <childnode refid="40105" relation="include">
        </childnode>
        <childnode refid="40144" relation="include">
        </childnode>
        <childnode refid="40162" relation="include">
        </childnode>
        <childnode refid="40163" relation="include">
        </childnode>
        <childnode refid="40165" relation="include">
        </childnode>
        <childnode refid="40166" relation="include">
        </childnode>
      </node>
      <node id="40139">
        <label>sstream</label>
      </node>
      <node id="40149">
        <label>openssl/evp.h</label>
      </node>
      <node id="40137">
        <label>tinyformat.h</label>
        <link refid="tinyformat_8h"/>
        <childnode refid="40111" relation="include">
        </childnode>
        <childnode refid="40138" relation="include">
        </childnode>
        <childnode refid="40139" relation="include">
        </childnode>
        <childnode refid="40140" relation="include">
        </childnode>
      </node>
      <node id="40113">
        <label>stdint.h</label>
        <link refid="stdint_8h"/>
      </node>
      <node id="40128">
        <label>streams.h</label>
        <link refid="streams_8h"/>
        <childnode refid="40118" relation="include">
        </childnode>
        <childnode refid="40106" relation="include">
        </childnode>
        <childnode refid="40129" relation="include">
        </childnode>
        <childnode refid="40130" relation="include">
        </childnode>
        <childnode refid="40131" relation="include">
        </childnode>
        <childnode refid="40112" relation="include">
        </childnode>
        <childnode refid="40109" relation="include">
        </childnode>
        <childnode refid="40110" relation="include">
        </childnode>
        <childnode refid="40113" relation="include">
        </childnode>
        <childnode refid="40107" relation="include">
        </childnode>
        <childnode refid="40121" relation="include">
        </childnode>
        <childnode refid="40132" relation="include">
        </childnode>
        <childnode refid="40108" relation="include">
        </childnode>
      </node>
      <node id="40135">
        <label>sys/time.h</label>
      </node>
      <node id="40138">
        <label>iostream</label>
      </node>
      <node id="40157">
        <label>leveldb/slice.h</label>
        <link refid="slice_8h"/>
        <childnode refid="40130" relation="include">
        </childnode>
        <childnode refid="40158" relation="include">
        </childnode>
        <childnode refid="40121" relation="include">
        </childnode>
        <childnode refid="40107" relation="include">
        </childnode>
      </node>
      <node id="40153">
        <label>openssl/bn.h</label>
      </node>
      <node id="40118">
        <label>allocators.h</label>
        <link refid="allocators_8h"/>
        <childnode refid="40119" relation="include">
        </childnode>
        <childnode refid="40121" relation="include">
        </childnode>
        <childnode refid="40107" relation="include">
        </childnode>
        <childnode refid="40122" relation="include">
        </childnode>
        <childnode refid="40109" relation="include">
        </childnode>
        <childnode refid="40123" relation="include">
        </childnode>
        <childnode refid="40124" relation="include">
        </childnode>
        <childnode refid="40125" relation="include">
        </childnode>
      </node>
      <node id="40163">
        <label>leveldb/env.h</label>
        <link refid="env_8h"/>
        <childnode refid="40107" relation="include">
        </childnode>
        <childnode refid="40108" relation="include">
        </childnode>
        <childnode refid="40164" relation="include">
        </childnode>
        <childnode refid="40113" relation="include">
        </childnode>
        <childnode refid="40159" relation="include">
        </childnode>
      </node>
      <node id="40110">
        <label>set</label>
      </node>
      <node id="40129">
        <label>algorithm</label>
      </node>
      <node id="40155">
        <label>stdio.h</label>
      </node>
      <node id="40119">
        <label>cleanse.h</label>
        <link refid="cleanse_8h"/>
        <childnode refid="40120" relation="include">
        </childnode>
      </node>
      <node id="40165">
        <label>leveldb/filter_policy.h</label>
        <link refid="filter__policy_8h"/>
        <childnode refid="40107" relation="include">
        </childnode>
      </node>
      <node id="40114">
        <label>cstring</label>
      </node>
      <node id="40166">
        <label>memenv.h</label>
        <link refid="memenv_8h"/>
      </node>
      <node id="40156">
        <label>leveldb/iterator.h</label>
        <link refid="iterator_8h"/>
        <childnode refid="40157" relation="include">
        </childnode>
        <childnode refid="40159" relation="include">
        </childnode>
      </node>
    </incdepgraph>
      <sectiondef kind="func">
      <memberdef kind="function" id="leveldbwrapper_8cpp_1aea36eb5fddb6266b14ea8cb15e183486" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void HandleError</definition>
        <argsstring>(const leveldb::Status &amp;status)</argsstring>
        <name>HandleError</name>
        <param>
          <type>const <ref refid="classleveldb_1_1_status" kindref="compound">leveldb::Status</ref> &amp;</type>
          <declname>status</declname>
        </param>
        <exceptions> throw (<ref refid="classleveldb__error" kindref="compound">leveldb_error</ref>)</exceptions>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dev/ds-160209/src/leveldbwrapper.cpp" line="14" column="1" bodyfile="/home/dev/ds-160209/src/leveldbwrapper.cpp" bodystart="14" bodyend="26"/>
        <references refid="util_8h_1afc02c0a4258fedfb316be612bb659ba8" compoundref="util_8h" startline="158">LogPrintf</references>
        <referencedby refid="class_c_level_d_b_wrapper_1ae796b1190c072df6275e0ada4d187943" compoundref="leveldbwrapper_8cpp" startline="44" endline="67">CLevelDBWrapper::CLevelDBWrapper</referencedby>
        <referencedby refid="class_c_level_d_b_wrapper_1a820484c9e427f9e3400396e750acf4b8" compoundref="leveldbwrapper_8cpp" startline="81" endline="86">CLevelDBWrapper::WriteBatch</referencedby>
        <referencedby refid="class_c_level_d_b_wrapper_1aa3b816ae43c930b4bf1f85461bff4b5b" compoundref="leveldbwrapper_8h" startline="91" endline="113">CLevelDBWrapper::Read</referencedby>
        <referencedby refid="class_c_level_d_b_wrapper_1a9c9d2e1c06c45c5d6883f33136f6718b" compoundref="leveldbwrapper_8h" startline="124" endline="140">CLevelDBWrapper::Exists</referencedby>
      </memberdef>
      <memberdef kind="function" id="leveldbwrapper_8cpp_1a22453a46b88c4e759768bbc1452049de" prot="public" static="yes" const="no" explicit="no" inline="no" virt="non-virtual">
        <type><ref refid="structleveldb_1_1_options" kindref="compound">leveldb::Options</ref></type>
        <definition>static leveldb::Options GetOptions</definition>
        <argsstring>(size_t nCacheSize)</argsstring>
        <name>GetOptions</name>
        <param>
          <type>size_t</type>
          <declname>nCacheSize</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dev/ds-160209/src/leveldbwrapper.cpp" line="28" column="1" bodyfile="/home/dev/ds-160209/src/leveldbwrapper.cpp" bodystart="28" bodyend="42"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="comment">//<sp/>Copyright<sp/>(c)<sp/>2012-2016<sp/>The<sp/>Bitcoin<sp/>developers</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight><highlight class="comment">//<sp/>Distributed<sp/>under<sp/>the<sp/>MIT<sp/>software<sp/>license,<sp/>see<sp/>the<sp/>accompanying</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="comment">//<sp/>file<sp/>COPYING<sp/>or<sp/>http://www.opensource.org/licenses/mit-license.php.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="leveldbwrapper_8h" kindref="compound">leveldbwrapper.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;boost/filesystem.hpp&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="cache_8h" kindref="compound">leveldb/cache.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="env_8h" kindref="compound">leveldb/env.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="filter__policy_8h" kindref="compound">leveldb/filter_policy.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;<ref refid="memenv_8h" kindref="compound">memenv.h</ref>&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight></codeline>
<codeline lineno="14" refid="leveldbwrapper_8h_1aea36eb5fddb6266b14ea8cb15e183486" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="leveldbwrapper_8cpp_1aea36eb5fddb6266b14ea8cb15e183486" kindref="member">HandleError</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/><ref refid="classleveldb_1_1_status" kindref="compound">leveldb::Status</ref>&amp;<sp/>status)<sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal">(<ref refid="classleveldb__error" kindref="compound">leveldb_error</ref>)</highlight></codeline>
<codeline lineno="15"><highlight class="normal">{</highlight></codeline>
<codeline lineno="16"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(status.ok())</highlight></codeline>
<codeline lineno="17"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="18"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="util_8h_1afc02c0a4258fedfb316be612bb659ba8" kindref="member">LogPrintf</ref>(</highlight><highlight class="stringliteral">&quot;%s\n&quot;</highlight><highlight class="normal">,<sp/>status.ToString());</highlight></codeline>
<codeline lineno="19"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(status.IsCorruption())</highlight></codeline>
<codeline lineno="20"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/><ref refid="classleveldb__error" kindref="compound">leveldb_error</ref>(</highlight><highlight class="stringliteral">&quot;Database<sp/>corrupted&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="21"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(status.IsIOError())</highlight></codeline>
<codeline lineno="22"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/><ref refid="classleveldb__error" kindref="compound">leveldb_error</ref>(</highlight><highlight class="stringliteral">&quot;Database<sp/>I/O<sp/>error&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="23"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(status.IsNotFound())</highlight></codeline>
<codeline lineno="24"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/><ref refid="classleveldb__error" kindref="compound">leveldb_error</ref>(</highlight><highlight class="stringliteral">&quot;Database<sp/>entry<sp/>missing&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="25"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal"><sp/><ref refid="classleveldb__error" kindref="compound">leveldb_error</ref>(</highlight><highlight class="stringliteral">&quot;Unknown<sp/>database<sp/>error&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="26"><highlight class="normal">}</highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="structleveldb_1_1_options" kindref="compound">leveldb::Options</ref><sp/>GetOptions(</highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>nCacheSize)</highlight></codeline>
<codeline lineno="29"><highlight class="normal">{</highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="structleveldb_1_1_options" kindref="compound">leveldb::Options</ref><sp/>options;</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/>options.<ref refid="structleveldb_1_1_options_1a4e87749ebac1ba28dff6bb63eb2059e5" kindref="member">block_cache</ref><sp/>=<sp/><ref refid="namespaceleveldb_1a231e1b41322a8b342c91a15a78e425d4" kindref="member">leveldb::NewLRUCache</ref>(nCacheSize<sp/>/<sp/>2);</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/>options.<ref refid="structleveldb_1_1_options_1a017f1f9558e6b3887434df29a16dac97" kindref="member">write_buffer_size</ref><sp/>=<sp/>nCacheSize<sp/>/<sp/>4;<sp/></highlight><highlight class="comment">//<sp/>up<sp/>to<sp/>two<sp/>write<sp/>buffers<sp/>may<sp/>be<sp/>held<sp/>in<sp/>memory<sp/>simultaneously</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/>options.<ref refid="structleveldb_1_1_options_1a24c88997a866d535e68de15b5c3cd02b" kindref="member">filter_policy</ref><sp/>=<sp/><ref refid="namespaceleveldb_1ae6b34bf2331983721554f284b1eaa1a1" kindref="member">leveldb::NewBloomFilterPolicy</ref>(10);</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/>options.<ref refid="structleveldb_1_1_options_1abdaf09c8bb3a788636ffb86cb93b01ab" kindref="member">compression</ref><sp/>=<sp/><ref refid="namespaceleveldb_1a047a8e77a76becb82bab4720994f6f9baf76e1b293dd8aa0709003431de425552" kindref="member">leveldb::kNoCompression</ref>;</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/>options.<ref refid="structleveldb_1_1_options_1a25c6ea125fc63342d8fc25b2f7817be4" kindref="member">max_open_files</ref><sp/>=<sp/>64;</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(leveldb::kMajorVersion<sp/>&gt;<sp/>1<sp/>||<sp/>(leveldb::kMajorVersion<sp/>==<sp/>1<sp/>&amp;&amp;<sp/>leveldb::kMinorVersion<sp/>&gt;=<sp/>16))<sp/>{</highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>LevelDB<sp/>versions<sp/>before<sp/>1.16<sp/>consider<sp/>short<sp/>writes<sp/>to<sp/>be<sp/>corruption.<sp/>Only<sp/>trigger<sp/>error</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>on<sp/>corruption<sp/>in<sp/>later<sp/>versions.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>options.<ref refid="structleveldb_1_1_options_1a4263dcc655493100eecc9daf6737a10b" kindref="member">paranoid_checks</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="40"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>options;</highlight></codeline>
<codeline lineno="42"><highlight class="normal">}</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44" refid="class_c_level_d_b_wrapper_1ae796b1190c072df6275e0ada4d187943" refkind="member"><highlight class="normal"><ref refid="class_c_level_d_b_wrapper_1ae796b1190c072df6275e0ada4d187943" kindref="member">CLevelDBWrapper::CLevelDBWrapper</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>boost::filesystem::path&amp;<sp/>path,<sp/></highlight><highlight class="keywordtype">size_t</highlight><highlight class="normal"><sp/>nCacheSize,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>fMemory,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>fWipe)</highlight></codeline>
<codeline lineno="45"><highlight class="normal">{</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/>penv<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/>readoptions.<ref refid="structleveldb_1_1_read_options_1a43731d67b707995e20571ad33c1f53f2" kindref="member">verify_checksums</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="48"><highlight class="normal"><sp/><sp/><sp/><sp/>iteroptions.<ref refid="structleveldb_1_1_read_options_1a43731d67b707995e20571ad33c1f53f2" kindref="member">verify_checksums</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="49"><highlight class="normal"><sp/><sp/><sp/><sp/>iteroptions.<ref refid="structleveldb_1_1_read_options_1a49f3754f8838596148ed5cbf9bbf8664" kindref="member">fill_cache</ref><sp/>=<sp/></highlight><highlight class="keyword">false</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/>syncoptions.<ref refid="structleveldb_1_1_write_options_1a07cd165ae5ed59a763001286e14ba47e" kindref="member">sync</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/>options<sp/>=<sp/>GetOptions(nCacheSize);</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/>options.<ref refid="structleveldb_1_1_options_1afe1b4e94164ff8f081b1c25bf1bcb62e" kindref="member">create_if_missing</ref><sp/>=<sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fMemory)<sp/>{</highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>penv<sp/>=<sp/><ref refid="namespaceleveldb_1a15271a802c68de223ea56b4b26e83519" kindref="member">leveldb::NewMemEnv</ref>(<ref refid="classleveldb_1_1_env_1ae15b67e650ff6790059745fd1b3bf3e7" kindref="member">leveldb::Env::Default</ref>());</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>options.<ref refid="structleveldb_1_1_options_1aeb08bfe820e9c89f57446d6fbd2e6ea8" kindref="member">env</ref><sp/>=<sp/>penv;</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/>}<sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(fWipe)<sp/>{</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="util_8h_1afc02c0a4258fedfb316be612bb659ba8" kindref="member">LogPrintf</ref>(</highlight><highlight class="stringliteral">&quot;Wiping<sp/>LevelDB<sp/>in<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>path.string());</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="namespaceleveldb_1a5b0819d4d4adc2147b5e91a5553fd7dc" kindref="member">leveldb::DestroyDB</ref>(path.string(),<sp/>options);</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="61"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="util_8cpp_1a4458ca67cacd593b21c8e1386d192064" kindref="member">TryCreateDirectory</ref>(path);</highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="util_8h_1afc02c0a4258fedfb316be612bb659ba8" kindref="member">LogPrintf</ref>(</highlight><highlight class="stringliteral">&quot;Opening<sp/>LevelDB<sp/>in<sp/>%s\n&quot;</highlight><highlight class="normal">,<sp/>path.string());</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classleveldb_1_1_status" kindref="compound">leveldb::Status</ref><sp/>status<sp/>=<sp/><ref refid="classleveldb_1_1_d_b_1ac1da2b48e911287d86f3a3bfa0f851fe" kindref="member">leveldb::DB::Open</ref>(options,<sp/>path.string(),<sp/>&amp;pdb);</highlight></codeline>
<codeline lineno="65"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="leveldbwrapper_8cpp_1aea36eb5fddb6266b14ea8cb15e183486" kindref="member">HandleError</ref>(status);</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="util_8h_1afc02c0a4258fedfb316be612bb659ba8" kindref="member">LogPrintf</ref>(</highlight><highlight class="stringliteral">&quot;Opened<sp/>LevelDB<sp/>successfully\n&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="67"><highlight class="normal">}</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69" refid="class_c_level_d_b_wrapper_1a7ffe7edeadfcf521d32509216e95403b" refkind="member"><highlight class="normal"><ref refid="class_c_level_d_b_wrapper_1a7ffe7edeadfcf521d32509216e95403b" kindref="member">CLevelDBWrapper::~CLevelDBWrapper</ref>()</highlight></codeline>
<codeline lineno="70"><highlight class="normal">{</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>pdb;</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/>pdb<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>options.<ref refid="structleveldb_1_1_options_1a24c88997a866d535e68de15b5c3cd02b" kindref="member">filter_policy</ref>;</highlight></codeline>
<codeline lineno="74"><highlight class="normal"><sp/><sp/><sp/><sp/>options.<ref refid="structleveldb_1_1_options_1a24c88997a866d535e68de15b5c3cd02b" kindref="member">filter_policy</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>options.<ref refid="structleveldb_1_1_options_1a4e87749ebac1ba28dff6bb63eb2059e5" kindref="member">block_cache</ref>;</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>options.<ref refid="structleveldb_1_1_options_1a4e87749ebac1ba28dff6bb63eb2059e5" kindref="member">block_cache</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>penv;</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/>options.<ref refid="structleveldb_1_1_options_1aeb08bfe820e9c89f57446d6fbd2e6ea8" kindref="member">env</ref><sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="79"><highlight class="normal">}</highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81" refid="class_c_level_d_b_wrapper_1a820484c9e427f9e3400396e750acf4b8" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/><ref refid="class_c_level_d_b_wrapper_1a820484c9e427f9e3400396e750acf4b8" kindref="member">CLevelDBWrapper::WriteBatch</ref>(<ref refid="class_c_level_d_b_batch" kindref="compound">CLevelDBBatch</ref>&amp;<sp/>batch,<sp/></highlight><highlight class="keywordtype">bool</highlight><highlight class="normal"><sp/>fSync)<sp/></highlight><highlight class="keywordflow">throw</highlight><highlight class="normal">(<ref refid="classleveldb__error" kindref="compound">leveldb_error</ref>)</highlight></codeline>
<codeline lineno="82"><highlight class="normal">{</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="classleveldb_1_1_status" kindref="compound">leveldb::Status</ref><sp/>status<sp/>=<sp/>pdb-&gt;Write(fSync<sp/>?<sp/>syncoptions<sp/>:<sp/>writeoptions,<sp/>&amp;batch.batch);</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="leveldbwrapper_8cpp_1aea36eb5fddb6266b14ea8cb15e183486" kindref="member">HandleError</ref>(status);</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">true</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="86"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/home/dev/ds-160209/src/leveldbwrapper.cpp"/>
  </compounddef>
</doxygen>

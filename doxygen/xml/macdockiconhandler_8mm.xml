<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.8.9.1">
  <compounddef id="macdockiconhandler_8mm" kind="file" language="Objective-C">
    <compoundname>macdockiconhandler.mm</compoundname>
    <includes refid="macdockiconhandler_8h" local="yes">macdockiconhandler.h</includes>
    <includes local="no">QImageWriter</includes>
    <includes local="no">QMenu</includes>
    <includes local="no">QBuffer</includes>
    <includes local="no">QWidget</includes>
    <includes local="no">Cocoa/Cocoa.h</includes>
    <incdepgraph>
      <node id="15208">
        <label>QObject</label>
      </node>
      <node id="15210">
        <label>QMenu</label>
      </node>
      <node id="15213">
        <label>Cocoa/Cocoa.h</label>
      </node>
      <node id="15205">
        <label>/home/dev/ds-160209/src/qt/macdockiconhandler.mm</label>
        <link refid="macdockiconhandler.mm"/>
        <childnode refid="15206" relation="include">
        </childnode>
        <childnode refid="15209" relation="include">
        </childnode>
        <childnode refid="15210" relation="include">
        </childnode>
        <childnode refid="15211" relation="include">
        </childnode>
        <childnode refid="15212" relation="include">
        </childnode>
        <childnode refid="15213" relation="include">
        </childnode>
      </node>
      <node id="15211">
        <label>QBuffer</label>
      </node>
      <node id="15207">
        <label>QMainWindow</label>
      </node>
      <node id="15206">
        <label>macdockiconhandler.h</label>
        <link refid="macdockiconhandler_8h"/>
        <childnode refid="15207" relation="include">
        </childnode>
        <childnode refid="15208" relation="include">
        </childnode>
      </node>
      <node id="15209">
        <label>QImageWriter</label>
      </node>
      <node id="15212">
        <label>QWidget</label>
      </node>
    </incdepgraph>
    <innerclass refid="interface_dock_icon_click_event_handler" prot="public">DockIconClickEventHandler</innerclass>
      <sectiondef kind="func">
      <memberdef kind="function" id="macdockiconhandler_8mm_1a97dcb4b8c1bda1b1e4a29fd1c36b6c47" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void qt_mac_set_dock_menu</definition>
        <argsstring>(QMenu *)</argsstring>
        <name>qt_mac_set_dock_menu</name>
        <param>
          <type>QMenu *</type>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="/home/dev/ds-160209/src/qt/macdockiconhandler.mm" line="12" column="1"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="preprocessor">#include<sp/>&quot;<ref refid="macdockiconhandler_8h" kindref="compound">macdockiconhandler.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="2"><highlight class="normal"></highlight></codeline>
<codeline lineno="3"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QImageWriter&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="4"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QMenu&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="5"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QBuffer&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="6"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;QWidget&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="7"><highlight class="normal"></highlight></codeline>
<codeline lineno="8"><highlight class="normal"></highlight><highlight class="preprocessor">#undef<sp/>slots</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="9"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&lt;Cocoa/Cocoa.h&gt;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="10"><highlight class="normal"></highlight></codeline>
<codeline lineno="11"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>QT_VERSION<sp/>&lt;<sp/>0x050000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="12"><highlight class="normal"></highlight><highlight class="keyword">extern</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="macdockiconhandler_8mm_1a97dcb4b8c1bda1b1e4a29fd1c36b6c47" kindref="member">qt_mac_set_dock_menu</ref>(QMenu<sp/>*);</highlight></codeline>
<codeline lineno="13"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="14"><highlight class="normal"></highlight></codeline>
<codeline lineno="15" refid="interface_dock_icon_click_event_handler" refkind="compound"><highlight class="normal"></highlight><highlight class="keyword">@interface<sp/></highlight><highlight class="normal"><ref refid="interface_dock_icon_click_event_handler" kindref="compound">DockIconClickEventHandler</ref><sp/>:<sp/>NSObject</highlight></codeline>
<codeline lineno="16"><highlight class="normal">{</highlight></codeline>
<codeline lineno="17" refid="interface_dock_icon_click_event_handler_1aa78888185bb434f259aac3deff007acb" refkind="member"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="class_mac_dock_icon_handler" kindref="compound">MacDockIconHandler</ref>*<sp/><ref refid="interface_dock_icon_click_event_handler_1aa78888185bb434f259aac3deff007acb" kindref="member">dockIconHandler</ref>;</highlight></codeline>
<codeline lineno="18"><highlight class="normal">}</highlight></codeline>
<codeline lineno="19"><highlight class="normal"></highlight></codeline>
<codeline lineno="20"><highlight class="normal"></highlight><highlight class="keyword">@end</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="21"><highlight class="normal"></highlight></codeline>
<codeline lineno="22"><highlight class="normal"></highlight><highlight class="keyword">@implementation<sp/></highlight><highlight class="normal"><ref refid="interface_dock_icon_click_event_handler" kindref="compound">DockIconClickEventHandler</ref></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal">-<sp/>(<ref refid="db__test_8cc_1a7441ef0865bcb3db9b8064dd7375c1ea" kindref="member">id</ref>)initWithDockIconHandler:(<ref refid="class_mac_dock_icon_handler" kindref="compound">MacDockIconHandler</ref><sp/>*)aDockIconHandler</highlight></codeline>
<codeline lineno="25"><highlight class="normal">{</highlight></codeline>
<codeline lineno="26"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal"><sp/>=<sp/>[</highlight><highlight class="keyword">super</highlight><highlight class="normal"><sp/>init];</highlight></codeline>
<codeline lineno="27"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(</highlight><highlight class="keyword">self</highlight><highlight class="normal">)<sp/>{</highlight></codeline>
<codeline lineno="28"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="interface_dock_icon_click_event_handler_1aa78888185bb434f259aac3deff007acb" kindref="member">dockIconHandler</ref><sp/>=<sp/>aDockIconHandler;</highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[[NSAppleEventManager<sp/>sharedAppleEventManager]</highlight></codeline>
<codeline lineno="31"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>setEventHandler:self</highlight></codeline>
<codeline lineno="32"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>andSelector:@selector(handleDockClickEvent:withReplyEvent:)</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>forEventClass:kCoreEventClass</highlight></codeline>
<codeline lineno="34"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>andEventID:kAEReopenApplication];</highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="36"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/></highlight><highlight class="keyword">self</highlight><highlight class="normal">;</highlight></codeline>
<codeline lineno="37"><highlight class="normal">}</highlight></codeline>
<codeline lineno="38"><highlight class="normal"></highlight></codeline>
<codeline lineno="39"><highlight class="normal">-<sp/>(void)handleDockClickEvent:(NSAppleEventDescriptor*)event<sp/>withReplyEvent:(NSAppleEventDescriptor*)replyEvent</highlight></codeline>
<codeline lineno="40"><highlight class="normal">{</highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/>Q_UNUSED(event)</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/>Q_UNUSED(replyEvent)</highlight></codeline>
<codeline lineno="43"><highlight class="normal"></highlight></codeline>
<codeline lineno="44"><highlight class="normal"><sp/><sp/><sp/><sp/>if<sp/>(<ref refid="interface_dock_icon_click_event_handler_1aa78888185bb434f259aac3deff007acb" kindref="member">dockIconHandler</ref>)<sp/>{</highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dockIconHandler-&gt;<ref refid="class_mac_dock_icon_handler_1a38f422d9dde7df4ccfdda97b08467e0a" kindref="member">handleDockIconClickEvent</ref>();</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="47"><highlight class="normal">}</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="keyword">@end</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"></highlight></codeline>
<codeline lineno="51"><highlight class="normal">MacDockIconHandler::MacDockIconHandler()<sp/>:<sp/>QObject()</highlight></codeline>
<codeline lineno="52"><highlight class="normal">{</highlight></codeline>
<codeline lineno="53"><highlight class="normal"><sp/><sp/><sp/><sp/>NSAutoreleasePool<sp/>*pool<sp/>=<sp/>[[NSAutoreleasePool<sp/>alloc]<sp/>init];</highlight></codeline>
<codeline lineno="54"><highlight class="normal"></highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;m_dockIconClickEventHandler<sp/>=<sp/>[[<ref refid="interface_dock_icon_click_event_handler" kindref="compound">DockIconClickEventHandler</ref><sp/>alloc]<sp/>initWithDockIconHandler:this];</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;m_dummyWidget<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QWidget();</highlight></codeline>
<codeline lineno="57"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;m_dockMenu<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/>QMenu(this-&gt;m_dummyWidget);</highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;setMainWindow(NULL);</highlight></codeline>
<codeline lineno="59"><highlight class="normal"></highlight><highlight class="preprocessor">#if<sp/>QT_VERSION<sp/>&lt;<sp/>0x050000</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="macdockiconhandler_8mm_1a97dcb4b8c1bda1b1e4a29fd1c36b6c47" kindref="member">qt_mac_set_dock_menu</ref>(this-&gt;m_dockMenu);</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight><highlight class="preprocessor">#endif</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>[pool<sp/>release];</highlight></codeline>
<codeline lineno="63"><highlight class="normal">}</highlight></codeline>
<codeline lineno="64"><highlight class="normal"></highlight></codeline>
<codeline lineno="65" refid="class_mac_dock_icon_handler_1a4d2d18c7d56286ea745e349497941293" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_mac_dock_icon_handler_1a4d2d18c7d56286ea745e349497941293" kindref="member">MacDockIconHandler::setMainWindow</ref>(QMainWindow<sp/>*window)<sp/>{</highlight></codeline>
<codeline lineno="66"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;mainWindow<sp/>=<sp/>window;</highlight></codeline>
<codeline lineno="67"><highlight class="normal">}</highlight></codeline>
<codeline lineno="68"><highlight class="normal"></highlight></codeline>
<codeline lineno="69" refid="class_mac_dock_icon_handler_1a1253fb7e351af70d8fcf863a8833066c" refkind="member"><highlight class="normal"><ref refid="class_mac_dock_icon_handler_1a1253fb7e351af70d8fcf863a8833066c" kindref="member">MacDockIconHandler::~MacDockIconHandler</ref>()</highlight></codeline>
<codeline lineno="70"><highlight class="normal">{</highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>[this-&gt;m_dockIconClickEventHandler<sp/>release];</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">delete</highlight><highlight class="normal"><sp/>this-&gt;m_dummyWidget;</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/>this-&gt;<ref refid="class_mac_dock_icon_handler_1a4d2d18c7d56286ea745e349497941293" kindref="member">setMainWindow</ref>(NULL);</highlight></codeline>
<codeline lineno="74"><highlight class="normal">}</highlight></codeline>
<codeline lineno="75"><highlight class="normal"></highlight></codeline>
<codeline lineno="76" refid="class_mac_dock_icon_handler_1a8aff3dc6410687e432f8d9314eba0ab9" refkind="member"><highlight class="normal">QMenu<sp/>*<ref refid="class_mac_dock_icon_handler_1a8aff3dc6410687e432f8d9314eba0ab9" kindref="member">MacDockIconHandler::dockMenu</ref>()</highlight></codeline>
<codeline lineno="77"><highlight class="normal">{</highlight></codeline>
<codeline lineno="78"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>this-&gt;m_dockMenu;</highlight></codeline>
<codeline lineno="79"><highlight class="normal">}</highlight></codeline>
<codeline lineno="80"><highlight class="normal"></highlight></codeline>
<codeline lineno="81" refid="class_mac_dock_icon_handler_1a537f8eb3c9752089e3e2e0e30011a65b" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_mac_dock_icon_handler_1a537f8eb3c9752089e3e2e0e30011a65b" kindref="member">MacDockIconHandler::setIcon</ref>(</highlight><highlight class="keyword">const</highlight><highlight class="normal"><sp/>QIcon<sp/>&amp;icon)</highlight></codeline>
<codeline lineno="82"><highlight class="normal">{</highlight></codeline>
<codeline lineno="83"><highlight class="normal"><sp/><sp/><sp/><sp/>NSAutoreleasePool<sp/>*pool<sp/>=<sp/>[[NSAutoreleasePool<sp/>alloc]<sp/>init];</highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/>NSImage<sp/>*image<sp/>=<sp/>nil;</highlight></codeline>
<codeline lineno="85"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(icon.isNull())</highlight></codeline>
<codeline lineno="86"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image<sp/>=<sp/>[[NSImage<sp/>imageNamed:</highlight><highlight class="stringliteral">@&quot;NSApplicationIcon&quot;</highlight><highlight class="normal">]<sp/>retain];</highlight></codeline>
<codeline lineno="87"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">else</highlight><highlight class="normal"><sp/>{</highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>generate<sp/>NSImage<sp/>from<sp/>QIcon<sp/>and<sp/>use<sp/>this<sp/>as<sp/>dock<sp/>icon.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QSize<sp/>size<sp/>=<sp/>icon.actualSize(QSize(128,<sp/>128));</highlight></codeline>
<codeline lineno="90"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QPixmap<sp/>pixmap<sp/>=<sp/>icon.pixmap(size);</highlight></codeline>
<codeline lineno="91"><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Write<sp/>image<sp/>into<sp/>a<sp/>R/W<sp/>buffer<sp/>from<sp/>raw<sp/>pixmap,<sp/>then<sp/>save<sp/>the<sp/>image.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QBuffer<sp/>notificationBuffer;</highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!pixmap.isNull()<sp/>&amp;&amp;<sp/>notificationBuffer.open(QIODevice::ReadWrite))<sp/>{</highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>QImageWriter<sp/>writer(&amp;notificationBuffer,<sp/></highlight><highlight class="stringliteral">&quot;PNG&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(writer.write(pixmap.toImage()))<sp/>{</highlight></codeline>
<codeline lineno="97"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>NSData*<sp/>macImgData<sp/>=<sp/>[NSData<sp/>dataWithBytes:notificationBuffer.buffer().data()</highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>length:notificationBuffer.buffer().size()];</highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image<sp/>=<sp/><sp/>[[NSImage<sp/>alloc]<sp/>initWithData:macImgData];</highlight></codeline>
<codeline lineno="100"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="102"><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(!image)<sp/>{</highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>if<sp/>testnet<sp/>image<sp/>could<sp/>not<sp/>be<sp/>created,<sp/>load<sp/>std.<sp/>app<sp/>icon</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>image<sp/>=<sp/>[[NSImage<sp/>imageNamed:@&quot;NSApplicationIcon&quot;]<sp/>retain];</highlight></codeline>
<codeline lineno="106"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="108"><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/>[NSApp<sp/>setApplicationIconImage:image];</highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/>[image<sp/>release];</highlight></codeline>
<codeline lineno="111"><highlight class="normal"><sp/><sp/><sp/><sp/>[pool<sp/>release];</highlight></codeline>
<codeline lineno="112"><highlight class="normal">}</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114" refid="class_mac_dock_icon_handler_1afd3ef7126d0b6ef02eaf85e5455fe6f4" refkind="member"><highlight class="normal"><ref refid="class_mac_dock_icon_handler" kindref="compound">MacDockIconHandler</ref><sp/>*<ref refid="class_mac_dock_icon_handler_1afd3ef7126d0b6ef02eaf85e5455fe6f4" kindref="member">MacDockIconHandler::instance</ref>()</highlight></codeline>
<codeline lineno="115"><highlight class="normal">{</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="class_mac_dock_icon_handler" kindref="compound">MacDockIconHandler</ref><sp/>*s_instance<sp/>=<sp/>NULL;</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(!s_instance)</highlight></codeline>
<codeline lineno="118"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>s_instance<sp/>=<sp/></highlight><highlight class="keyword">new</highlight><highlight class="normal"><sp/><ref refid="class_mac_dock_icon_handler" kindref="compound">MacDockIconHandler</ref>();</highlight></codeline>
<codeline lineno="119"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">return</highlight><highlight class="normal"><sp/>s_instance;</highlight></codeline>
<codeline lineno="120"><highlight class="normal">}</highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight></codeline>
<codeline lineno="122" refid="class_mac_dock_icon_handler_1a38f422d9dde7df4ccfdda97b08467e0a" refkind="member"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="class_mac_dock_icon_handler_1a38f422d9dde7df4ccfdda97b08467e0a" kindref="member">MacDockIconHandler::handleDockIconClickEvent</ref>()</highlight></codeline>
<codeline lineno="123"><highlight class="normal">{</highlight></codeline>
<codeline lineno="124"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(this-&gt;mainWindow)</highlight></codeline>
<codeline lineno="125"><highlight class="normal"><sp/><sp/><sp/><sp/>{</highlight></codeline>
<codeline lineno="126"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;mainWindow-&gt;activateWindow();</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>this-&gt;mainWindow-&gt;show();</highlight></codeline>
<codeline lineno="128"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"><sp/><sp/><sp/><sp/>emit<sp/>this-&gt;<ref refid="class_mac_dock_icon_handler_1ae75bf0cda7a9c1a8fbc24af59b9f0e0f" kindref="member">dockIconClicked</ref>();</highlight></codeline>
<codeline lineno="131"><highlight class="normal">}</highlight></codeline>
    </programlisting>
    <location file="/home/dev/ds-160209/src/qt/macdockiconhandler.mm"/>
  </compounddef>
</doxygen>

.TH "/home/dev/ds-160209/src/smessage.cpp" 3 "Wed Feb 10 2016" "Version 1.0.0.0" "darksilk" \" -*- nroff -*-
.ad l
.nh
.SH NAME
/home/dev/ds-160209/src/smessage.cpp \- 
.SH SYNOPSIS
.br
.PP
\fC#include 'smessage\&.h'\fP
.br
\fC#include <stdint\&.h>\fP
.br
\fC#include <time\&.h>\fP
.br
\fC#include <map>\fP
.br
\fC#include <stdexcept>\fP
.br
\fC#include <sstream>\fP
.br
\fC#include <errno\&.h>\fP
.br
\fC#include <openssl/crypto\&.h>\fP
.br
\fC#include <openssl/ec\&.h>\fP
.br
\fC#include <openssl/ecdh\&.h>\fP
.br
\fC#include <openssl/sha\&.h>\fP
.br
\fC#include <openssl/aes\&.h>\fP
.br
\fC#include <openssl/evp\&.h>\fP
.br
\fC#include <openssl/hmac\&.h>\fP
.br
\fC#include <boost/lexical_cast\&.hpp>\fP
.br
\fC#include <boost/algorithm/string/predicate\&.hpp>\fP
.br
\fC#include 'base58\&.h'\fP
.br
\fC#include 'db\&.h'\fP
.br
\fC#include 'init\&.h'\fP
.br
\fC#include 'txdb\&.h'\fP
.br
\fC#include 'sync\&.h'\fP
.br
\fC#include 'ecwrapper\&.h'\fP
.br
\fC#include 'txdb-leveldb\&.h'\fP
.br
\fC#include 'lz4/lz4\&.c'\fP
.br
\fC#include 'xxhash/xxhash\&.h'\fP
.br
\fC#include 'xxhash/xxhash\&.c'\fP
.br

.SS "Classes"

.in +1c
.ti -1c
.RI "class \fBSecMsgBatchScanner\fP"
.br
.in -1c
.SS "Functions"

.in +1c
.ti -1c
.RI "void \fBThreadSecureMsg\fP ()"
.br
.ti -1c
.RI "void \fBThreadSecureMsgPow\fP ()"
.br
.ti -1c
.RI "int \fBSecureMsgBuildBucketSet\fP ()"
.br
.ti -1c
.RI "int \fBSecureMsgAddWalletAddresses\fP ()"
.br
.ti -1c
.RI "int \fBSecureMsgReadIni\fP ()"
.br
.ti -1c
.RI "int \fBSecureMsgWriteIni\fP ()"
.br
.ti -1c
.RI "bool \fBSecureMsgStart\fP (bool fDontStart, bool fScanChain)"
.br
.ti -1c
.RI "bool \fBSecureMsgShutdown\fP ()"
.br
.ti -1c
.RI "bool \fBSecureMsgEnable\fP ()"
.br
.ti -1c
.RI "bool \fBSecureMsgDisable\fP ()"
.br
.ti -1c
.RI "bool \fBSecureMsgReceiveData\fP (\fBCNode\fP *pfrom, std::string strCommand, \fBCDataStream\fP &vRecv)"
.br
.ti -1c
.RI "bool \fBSecureMsgSendData\fP (\fBCNode\fP *pto, bool fSendTrickle)"
.br
.ti -1c
.RI "int \fBSecureMsgInsertAddress\fP (\fBCKeyID\fP &hashKey, \fBCPubKey\fP &pubKey)"
.br
.ti -1c
.RI "bool \fBSecureMsgScanBlock\fP (\fBCBlock\fP &\fBblock\fP)"
.br
.ti -1c
.RI "bool \fBScanChainForPublicKeys\fP (\fBCBlockIndex\fP *pindexStart)"
.br
.ti -1c
.RI "bool \fBSecureMsgScanBlockChain\fP ()"
.br
.ti -1c
.RI "bool \fBSecureMsgScanBuckets\fP ()"
.br
.ti -1c
.RI "int \fBSecureMsgWalletUnlocked\fP ()"
.br
.ti -1c
.RI "int \fBSecureMsgWalletKeyChanged\fP (std::string sAddress, std::string sLabel, \fBChangeType\fP mode)"
.br
.ti -1c
.RI "int \fBSecureMsgScanMessage\fP (\fBuint8_t\fP *pHeader, \fBuint8_t\fP *pPayload, \fBuint32_t\fP nPayload, bool reportToGui)"
.br
.ti -1c
.RI "int \fBSecureMsgGetLocalKey\fP (\fBCKeyID\fP &ckid, \fBCPubKey\fP &cpkOut)"
.br
.ti -1c
.RI "int \fBSecureMsgGetLocalPublicKey\fP (std::string &strAddress, std::string &strPublicKey)"
.br
.ti -1c
.RI "int \fBSecureMsgGetStoredKey\fP (\fBCKeyID\fP &ckid, \fBCPubKey\fP &cpkOut)"
.br
.ti -1c
.RI "int \fBSecureMsgAddAddress\fP (std::string &address, std::string &publicKey)"
.br
.ti -1c
.RI "int \fBSecureMsgRetrieve\fP (\fBSecMsgToken\fP &token, std::vector< \fBuint8_t\fP > &vchData)"
.br
.ti -1c
.RI "int \fBSecureMsgReceive\fP (\fBCNode\fP *pfrom, std::vector< \fBuint8_t\fP > &vchData)"
.br
.ti -1c
.RI "int \fBSecureMsgStoreUnscanned\fP (\fBuint8_t\fP *pHeader, \fBuint8_t\fP *pPayload, \fBuint32_t\fP nPayload)"
.br
.ti -1c
.RI "int \fBSecureMsgStore\fP (\fBuint8_t\fP *pHeader, \fBuint8_t\fP *pPayload, \fBuint32_t\fP nPayload, bool fUpdateBucket)"
.br
.ti -1c
.RI "int \fBSecureMsgStore\fP (\fBSecureMessage\fP &smsg, bool fUpdateBucket)"
.br
.ti -1c
.RI "int \fBSecureMsgValidate\fP (\fBuint8_t\fP *pHeader, \fBuint8_t\fP *pPayload, \fBuint32_t\fP nPayload)"
.br
.ti -1c
.RI "int \fBSecureMsgSetHash\fP (\fBuint8_t\fP *pHeader, \fBuint8_t\fP *pPayload, \fBuint32_t\fP nPayload)"
.br
.ti -1c
.RI "int \fBSecureMsgEncrypt\fP (\fBSecureMessage\fP &smsg, const std::string &addressFrom, const std::string &addressTo, const std::string &message)"
.br
.ti -1c
.RI "int \fBSecureMsgSend\fP (std::string &addressFrom, std::string &addressTo, std::string &message, std::string &sError)"
.br
.ti -1c
.RI "int \fBSecureMsgDecrypt\fP (bool fTestOnly, std::string &address, \fBuint8_t\fP *pHeader, \fBuint8_t\fP *pPayload, \fBuint32_t\fP nPayload, \fBMessageData\fP &msg)"
.br
.ti -1c
.RI "int \fBSecureMsgDecrypt\fP (bool fTestOnly, std::string &address, \fBSecureMessage\fP &smsg, \fBMessageData\fP &msg)"
.br
.in -1c
.SS "Variables"

.in +1c
.ti -1c
.RI "boost::thread_group \fBthreadGroupSmsg\fP"
.br
.ti -1c
.RI "boost::signals2::signal< void(\fBSecMsgStored\fP &inboxHdr)> \fBNotifySecMsgInboxChanged\fP"
.br
.ti -1c
.RI "boost::signals2::signal< void(\fBSecMsgStored\fP &outboxHdr)> \fBNotifySecMsgOutboxChanged\fP"
.br
.ti -1c
.RI "boost::signals2::signal< void()> \fBNotifySecMsgWalletUnlocked\fP"
.br
.ti -1c
.RI "bool \fBfSecMsgEnabled\fP = false"
.br
.ti -1c
.RI "std::map< \fBint64_t\fP, \fBSecMsgBucket\fP > \fBsmsgBuckets\fP"
.br
.ti -1c
.RI "std::vector< \fBSecMsgAddress\fP > \fBsmsgAddresses\fP"
.br
.ti -1c
.RI "\fBSecMsgOptions\fP \fBsmsgOptions\fP"
.br
.ti -1c
.RI "\fBCCriticalSection\fP \fBcs_smsg\fP"
.br
.ti -1c
.RI "\fBCCriticalSection\fP \fBcs_smsgDB\fP"
.br
.ti -1c
.RI "\fBCCriticalSection\fP \fBcs_smsgThreads\fP"
.br
.ti -1c
.RI "\fBleveldb::DB\fP * \fBsmsgDB\fP = NULL"
.br
.in -1c
.SH "Function Documentation"
.PP 
.SS "bool ScanChainForPublicKeys (\fBCBlockIndex\fP * pindexStart)"

.PP
Definition at line 2073 of file smessage\&.cpp\&.
.SS "int SecureMsgAddAddress (std::string & address, std::string & publicKey)"

.PP
Definition at line 2676 of file smessage\&.cpp\&.
.SS "int SecureMsgAddWalletAddresses ()"

.PP
Definition at line 911 of file smessage\&.cpp\&.
.SS "int SecureMsgBuildBucketSet ()"

.PP
Definition at line 768 of file smessage\&.cpp\&.
.SS "int SecureMsgDecrypt (bool fTestOnly, std::string & address, \fBuint8_t\fP * pHeader, \fBuint8_t\fP * pPayload, \fBuint32_t\fP nPayload, \fBMessageData\fP & msg)"

.PP
Definition at line 3702 of file smessage\&.cpp\&.
.SS "int SecureMsgDecrypt (bool fTestOnly, std::string & address, \fBSecureMessage\fP & smsg, \fBMessageData\fP & msg)"

.PP
Definition at line 3948 of file smessage\&.cpp\&.
.SS "bool SecureMsgDisable ()"

.PP
Definition at line 1231 of file smessage\&.cpp\&.
.SS "bool SecureMsgEnable ()"

.PP
Definition at line 1170 of file smessage\&.cpp\&.
.SS "int SecureMsgEncrypt (\fBSecureMessage\fP & smsg, const std::string & addressFrom, const std::string & addressTo, const std::string & message)"

.PP
Definition at line 3276 of file smessage\&.cpp\&.
.SS "int SecureMsgGetLocalKey (\fBCKeyID\fP & ckid, \fBCPubKey\fP & cpkOut)"

.PP
Definition at line 2601 of file smessage\&.cpp\&.
.SS "int SecureMsgGetLocalPublicKey (std::string & strAddress, std::string & strPublicKey)"

.PP
Definition at line 2619 of file smessage\&.cpp\&.
.SS "int SecureMsgGetStoredKey (\fBCKeyID\fP & ckid, \fBCPubKey\fP & cpkOut)"

.PP
Definition at line 2649 of file smessage\&.cpp\&.
.SS "int SecureMsgInsertAddress (\fBCKeyID\fP & hashKey, \fBCPubKey\fP & pubKey)"

.PP
Definition at line 1922 of file smessage\&.cpp\&.
.SS "int SecureMsgReadIni ()"

.PP
Definition at line 964 of file smessage\&.cpp\&.
.SS "int SecureMsgReceive (\fBCNode\fP * pfrom, std::vector< \fBuint8_t\fP > & vchData)"

.PP
Definition at line 2796 of file smessage\&.cpp\&.
.SS "bool SecureMsgReceiveData (\fBCNode\fP * pfrom, std::string strCommand, \fBCDataStream\fP & vRecv)"

.PP
Definition at line 1292 of file smessage\&.cpp\&.
.SS "int SecureMsgRetrieve (\fBSecMsgToken\fP & token, std::vector< \fBuint8_t\fP > & vchData)"

.PP
Definition at line 2731 of file smessage\&.cpp\&.
.SS "bool SecureMsgScanBlock (\fBCBlock\fP & block)"

.PP
Definition at line 2037 of file smessage\&.cpp\&.
.SS "bool SecureMsgScanBlockChain ()"

.PP
Definition at line 2123 of file smessage\&.cpp\&.
.SS "bool SecureMsgScanBuckets ()"

.PP
Definition at line 2153 of file smessage\&.cpp\&.
.SS "int SecureMsgScanMessage (\fBuint8_t\fP * pHeader, \fBuint8_t\fP * pPayload, \fBuint32_t\fP nPayload, bool reportToGui)"

.PP
Definition at line 2482 of file smessage\&.cpp\&.
.SS "int SecureMsgSend (std::string & addressFrom, std::string & addressTo, std::string & message, std::string & sError)"

.PP
Definition at line 3533 of file smessage\&.cpp\&.
.SS "bool SecureMsgSendData (\fBCNode\fP * pto, bool fSendTrickle)"

.PP
Definition at line 1783 of file smessage\&.cpp\&.
.SS "int SecureMsgSetHash (\fBuint8_t\fP * pHeader, \fBuint8_t\fP * pPayload, \fBuint32_t\fP nPayload)"

.PP
Definition at line 3168 of file smessage\&.cpp\&.
.SS "bool SecureMsgShutdown ()"

.PP
Definition at line 1144 of file smessage\&.cpp\&.
.SS "bool SecureMsgStart (bool fDontStart, bool fScanChain)"
called from \fBAppInit2()\fP in \fBinit\&.cpp\fP 
.PP
Definition at line 1104 of file smessage\&.cpp\&.
.SS "int SecureMsgStore (\fBuint8_t\fP * pHeader, \fBuint8_t\fP * pPayload, \fBuint32_t\fP nPayload, bool fUpdateBucket)"

.PP
Definition at line 2978 of file smessage\&.cpp\&.
.SS "int SecureMsgStore (\fBSecureMessage\fP & smsg, bool fUpdateBucket)"

.PP
Definition at line 3094 of file smessage\&.cpp\&.
.SS "int SecureMsgStoreUnscanned (\fBuint8_t\fP * pHeader, \fBuint8_t\fP * pPayload, \fBuint32_t\fP nPayload)"

.PP
Definition at line 2911 of file smessage\&.cpp\&.
.SS "int SecureMsgValidate (\fBuint8_t\fP * pHeader, \fBuint8_t\fP * pPayload, \fBuint32_t\fP nPayload)"

.PP
Definition at line 3099 of file smessage\&.cpp\&.
.SS "int SecureMsgWalletKeyChanged (std::string sAddress, std::string sLabel, \fBChangeType\fP mode)"

.PP
Definition at line 2446 of file smessage\&.cpp\&.
.SS "int SecureMsgWalletUnlocked ()"

.PP
Definition at line 2301 of file smessage\&.cpp\&.
.SS "int SecureMsgWriteIni ()"

.PP
Definition at line 1038 of file smessage\&.cpp\&.
.SS "void ThreadSecureMsg ()"

.PP
Definition at line 579 of file smessage\&.cpp\&.
.SS "void ThreadSecureMsgPow ()"

.PP
Definition at line 687 of file smessage\&.cpp\&.
.SH "Variable Documentation"
.PP 
.SS "\fBCCriticalSection\fP cs_smsg"

.PP
Definition at line 81 of file smessage\&.cpp\&.
.SS "\fBCCriticalSection\fP cs_smsgDB"

.PP
Definition at line 82 of file smessage\&.cpp\&.
.SS "\fBCCriticalSection\fP cs_smsgThreads"

.PP
Definition at line 83 of file smessage\&.cpp\&.
.SS "bool fSecMsgEnabled = false"

.PP
Definition at line 74 of file smessage\&.cpp\&.
.SS "boost::signals2::signal<void (\fBSecMsgStored\fP& inboxHdr)> NotifySecMsgInboxChanged"

.PP
Definition at line 70 of file smessage\&.cpp\&.
.SS "boost::signals2::signal<void (\fBSecMsgStored\fP& outboxHdr)> NotifySecMsgOutboxChanged"

.PP
Definition at line 71 of file smessage\&.cpp\&.
.SS "boost::signals2::signal<void ()> NotifySecMsgWalletUnlocked"

.PP
Definition at line 72 of file smessage\&.cpp\&.
.SS "std::vector<\fBSecMsgAddress\fP> smsgAddresses"

.PP
Definition at line 77 of file smessage\&.cpp\&.
.SS "std::map<\fBint64_t\fP, \fBSecMsgBucket\fP> smsgBuckets"

.PP
Definition at line 76 of file smessage\&.cpp\&.
.SS "\fBleveldb::DB\fP* smsgDB = NULL"

.PP
Definition at line 85 of file smessage\&.cpp\&.
.SS "\fBSecMsgOptions\fP smsgOptions"

.PP
Definition at line 78 of file smessage\&.cpp\&.
.SS "boost::thread_group threadGroupSmsg"

.PP
Definition at line 68 of file smessage\&.cpp\&.
.SH "Author"
.PP 
Generated automatically by Doxygen for darksilk from the source code\&.
